(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.i18n,l=window.wp.data,o=window.wp.plugins,s=window.wp.element,r=window.wp.blocks,a=window.wp.components,c=window.wp.blockEditor,i=window.wp.notices,b=window.wp.apiFetch;var d=e.n(b);const u=window.wp.url,p=window.lodash,m=window.wp.hooks;(0,n.__)("Responsive width","content-blocks-builder"),(0,n.__)("Responsive height","content-blocks-builder"),(0,n.__)("Responsive spacing","content-blocks-builder"),(0,n.__)("Responsive border","content-blocks-builder"),(0,n.__)("Media background","content-blocks-builder"),(0,n.__)("Background overlay","content-blocks-builder"),(0,n.__)("Text alignment","content-blocks-builder"),(0,n.__)("Vertical alignment","content-blocks-builder"),(0,n.__)("Justify alignment","content-blocks-builder"),(0,n.__)("Aspect ratio","content-blocks-builder"),(0,n.__)("Box shadow","content-blocks-builder"),(0,n.__)("Transform","content-blocks-builder"),(0,n.__)("Visibility","content-blocks-builder"),(0,n.__)("Toggle content","content-blocks-builder"),(0,n.__)("Sticky content","content-blocks-builder"),(0,n.__)("Custom attributes","content-blocks-builder"),(0,n.__)("Animation (premium)","content-blocks-builder"),(0,n.__)("Custom CSS (premium)","content-blocks-builder"),(0,n.__)("Steps style (premium)","content-blocks-builder"),(0,m.applyFilters)("boldblocks.CBB.isPremium",!1);const _=window.wp.coreData,k=()=>(0,l.useSelect)((e=>e(_.store).canUser("update","settings")),[]);function g({modalTitle:e,title:l,titleHelp:o,setIsModalOpen:r,onSubmit:c=p.noop,onCancel:i=p.noop,className:b}){const[d,u]=(0,s.useState)(l),m=()=>{r(!1),u(""),i()};return(0,t.createElement)(a.Modal,{title:e,closeLabel:(0,n.__)("Close","content-blocks-builder"),onRequestClose:()=>m(),overlayClassName:"reusable-blocks-menu-items__convert-modal",className:b},(0,t.createElement)("form",{onSubmit:e=>{e.preventDefault(),c(d),m()}},(0,t.createElement)(a.TextControl,{label:(0,n.__)("Name","content-blocks-builder"),value:d,onChange:u,help:o,className:"title-input"}),(0,t.createElement)(a.Flex,{className:"reusable-blocks-menu-items__convert-modal-actions",justify:"flex-end"},(0,t.createElement)(a.FlexItem,null,(0,t.createElement)(a.Button,{variant:"secondary",onClick:()=>m()},(0,n.__)("Cancel","content-blocks-builder"))),(0,t.createElement)(a.FlexItem,null,(0,t.createElement)(a.Button,{variant:"primary",type:"submit",disabled:!d},(0,n.__)("Save","content-blocks-builder"))))))}(0,o.registerPlugin)("boldblocks-create-block-pattern",{render:()=>{const{getBlocksByClientId:e,getBlockName:o}=(0,l.useSelect)((e=>e(c.store)),[]),{createSuccessNotice:b}=(0,l.useDispatch)(i.store),[m,k]=(0,s.useState)({isModalOpen:!1,clientIds:[]}),{isModalOpen:w,clientIds:h}=m;if(!(0,l.useSelect)((e=>e(_.store).canUser("create","posts")),[]))return null;const E=(0,n.__)("Create block pattern","content-blocks-builder");return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.BlockSettingsMenuControls,null,(({selectedClientIds:e})=>e?.length>0&&((e,t)=>{if(!e?.length)return!1;const n=function(e,t){var n;let l;return(0,p.isObject)(e)?({supports:{boldblocks:l}={}}=e):(0,p.isString)(e)&&(l=(0,r.getBlockSupport)(e,"boldblocks")),!!l&&null!==(n=l[t])&&void 0!==n&&n}(t(e[0]),"layoutType");return!["gridItem","carouselItem","accordionItem","vstackItem"].includes(n)})(e,o)?(0,t.createElement)(a.MenuItem,{label:E,icon:"plus-alt2",onClick:()=>k({isModalOpen:!0,clientIds:e})},E):null)),w&&(0,t.createElement)(g,{modalTitle:E,title:(0,n.__)("CBB - A new pattern","content-blocks-builder"),titleHelp:(0,n.__)("You could name your pattern with a prefix that indicates it is a white label, such as ‘Awesome Project - Hero’.","content-blocks-builder"),setIsModalOpen:e=>k({...m,isModalOpen:e}),onSubmit:t=>{(({title:t,clientIds:l})=>{const o=e(l),s=(0,r.serialize)(o);d()({path:"wp/v2/boldblocks-patterns",method:"POST",data:{title:t,content:s,status:"publish"}}).then((e=>{var t;b("The new pattern has been created!",{type:"snackbar",actions:[{label:(0,n.__)("Edit pattern","content-blocks-builder"),url:(t=e.id,(0,u.addQueryArgs)(`post.php?post=${t}&action=edit`))}]})}))})({title:t,clientIds:h})},className:"cbb-block-modal"}))}});const w=window.wp.editPost,h=window.wp.editor,E="boldblocks_pattern";(0,o.registerPlugin)("boldblocks-pattern-meta",{render:()=>{const{getCurrentPostType:e}=(0,l.useSelect)((e=>e(h.store)),[]),[o,r]=(0,s.useState)(!0),[c,i]=(0,s.useState)([]);if(e()!==E)return null;(0,s.useEffect)((()=>{d()({path:"boldblocks/v1/getPatternCategories"}).then((e=>{i(e),r(!1)}))}),[]);const[b,p]=(0,_.useEntityProp)("postType",E,"meta"),g=e=>t=>{p({...b,[e]:t})},{boldblocks_pattern_categories:y=[],boldblocks_pattern_description:C="",boldblocks_pattern_disabled_inserter:S=!1}=b,v=(0,n.__)("Pattern settings","content-blocks-builder"),f=(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.TextareaControl,{label:(0,n.__)("Pattern description","content-blocks-builder"),value:C,onChange:g("boldblocks_pattern_description"),rows:4}),(0,t.createElement)(a.ToggleControl,{checked:S,label:(0,n.__)("Don't show this pattern in the inserter","content-blocks-builder"),onChange:g("boldblocks_pattern_disabled_inserter")}),(0,t.createElement)(a.BaseControl,{label:(0,n.__)("Select pattern categories","content-blocks-builder")}),c.length?(0,t.createElement)(t.Fragment,null,c.filter((({name:e})=>"boldblocks"!==e)).map((({name:e,label:n})=>(0,t.createElement)(a.CheckboxControl,{key:e,label:n,checked:y.find((({name:t})=>t===e)),onChange:t=>{let l=[];l=t?[...y,{name:e,label:n}]:y.filter((({name:t})=>t!==e)),g("boldblocks_pattern_categories")(l)}}))),k&&(0,t.createElement)("p",null,(0,t.createElement)(a.ExternalLink,{href:(0,u.addQueryArgs)("edit.php?post_type=boldblocks_block&page=cbb-settings&tab=others")},(0,n.__)("Manage custom categories","content-blocks-builder")))):(0,t.createElement)(t.Fragment,null,o&&(0,t.createElement)(a.Spinner,null)),(0,m.applyFilters)("boldblocks.patternSettings.additionalSettings",null,{meta:b,setMeta:p}));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(w.PluginDocumentSettingPanel,{name:"content-block-settings",title:v,initialOpen:!0},f),(0,t.createElement)(w.PluginSidebarMoreMenuItem,{target:"pattern-settings"},v),(0,t.createElement)(w.PluginSidebar,{name:"pattern-settings",title:v},(0,t.createElement)(a.PanelBody,null,f)))}})})();